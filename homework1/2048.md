*2048 from djyU201611827*

**本程序是一个用python语言写的2048的小游戏**

**以下是效果图**
![2048 preview](data:image/png;base64,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
)

**代码如下，直接运行即可**

```python
import random

m = [[0, 0, 0, 0],
     [0, 0, 0, 0],
     [0, 0, 0, 0],
     [0, 0, 0, 0]]

def display(m, score):
        #显示界面,并用矩阵值代替字符串
        print('{0} {1} {2} {3}'.format(m[0][0], m[0][1], m[0][2], m[0][3]))
        print('{0} {1} {2} {3}'.format(m[1][0], m[1][1], m[1][2], m[1][3]))
        print('{0} {1} {2} {3}'.format(m[2][0], m[2][1], m[2][2], m[2][3]))
        print('{0} {1} {2} {3}'.format(m[3][0], m[3][1], m[3][2], m[3][3]),
'    Total score: ', score)
def init(m):
#初始值随机
        for i in range(4):
               m[i]=[2 if random.randrange(100)>79 \
                       else 0 for x in m[i]]
    #另一种方法 for i in range(4)
    #m[i]=2 if randrange(100)>79 else 0 这样开始有值的网格数量较少
def getnear(matrix, direction):

        '''
        对齐非零的数字
        direction == 'left'：向左对齐
        direction == 'right'：向右对齐
        '''

        # 移除列表中的0
        for i in range(matrix.count(0)):
                matrix.remove(0)

        zeros = [0 for x in range(4 - len(matrix))]

        # 在非0数字的一侧补充0

        if direction == 'left':
                matrix.extend(zeros)
        else:
                matrix[:0] = zeros

def addSame(matrix, direction):

        #在列表查找相同且相邻的数字相加, 找到符合条件的返回True，否则返回False,同时还返回增加的分数

        score = 0
        if direction == 'left':
                for i in [0, 1, 2]:
                        if matrix[i] ==matrix[i+1] != 0:
                                matrix[i] *= 2
                                matrix[i+1] = 0
                                score += matrix[i]
                                return {'bool':True, 'score':score}

        else:
                for i in [3, 2, 1]:
                        if matrix[i] == matrix[i-1] != 0:
                                matrix[i-1] *= 2
                                matrix[i] = 0
                                score += matrix[i-1]
                                return {'bool':True, 'score':score}
        return {'bool':False, 'score':score}

def handle(matrix, direction):
        #处理一行（列）中的数据，得到最终的该行（列）的数字状态值, 返回得分
       #向上变为向左的转置，向下变为向右的转置

        totalScore = 0
        getnear(matrix, direction)
        result = addSame(matrix, direction)
        while result['bool'] == True:
                #当实现加法加分后重新进行getnear和addsame直到加不动为至，在网上看到有一种2048程序是getnear（addsame（getnear）），最后的结果不同
                totalScore += result['score']
                getnear(matrix, direction)
                result = addSame(matrix, direction)
        return totalScore


def operation(m):
       #分为两步，求出状态值，再记录得分

        totalScore = 0
        gameOver = False
        direction = 'left'
        op = input('operator:')
        if op in ['a', 'A']:    # 向左移动
                direction = 'left'
                for row in range(4):
                        totalScore += handle(m[row], direction)
        elif op in ['d', 'D']:  # 向右移动
                direction = 'right'
                for row in range(4):
                        totalScore += handle(m[row], direction)
        elif op in ['w', 'W']:  # 向上移动
                direction = 'left'
                for col in range(4):
                        # 将矩阵中一列复制到一个列表中然后处理
                        matrix = [m[row][col] for row in range(4)]
                        totalScore += handle(matrix, direction)
                        # 从处理后的列表中的数字覆盖原来矩阵中的值
                        for row in range(4):
                                m[row][col] = matrix[row]
        elif op in ['s', 'S']:  # 向下移动
                direction = 'right'
                for col in range(4):
                        # 同上
                        matrix = [m[row][col] for row in range(4)]
                        totalScore += handle(matrix, direction)
                        for row in range(4):
                                m[row][col] = matrix[row]
        else:
                print('Invalid input, please enter a charactor in [W, S, A, D] or the lower')
                return {'gameOver':gameOver, 'score':totalScore}

        # 统计空白区域数目 N

        N = 0
        for q in m:
            N += q.count(0)
      # 不存在剩余的空白区域时，游戏结束
        if N == 0:
                gameOver = True
                return {'gameOver':gameOver, 'score':totalScore}

        # 每次op按比例产生新数字

        num = random.choice([2, 2, 2, 4])
        k = random.randrange(1, N+1)
        n = 0
        for i in range(4):
                for j in range(4):
                        if m[i][j] == 0:
                                n += 1
                                if n == k:
                                        m[i][j] = num
                                        break

        return {'gameOver':gameOver, 'score':totalScore}

init(m)
score = 0
print('Input：W S A D press <CR>.')
while True:
        display(m, score)
        result = operation(m)
        if result['gameOver'] == True:
                print('faild')
                print('Your total score:', score)
        else:
                score += result['score']
                if score >= 2048:
                        print('2048！')
                        print('Your total score:', score)
